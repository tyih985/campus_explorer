version: "3.8"
services:
    backend:
        build:
            context: .
            dockerfile: Dockerfile
        command: ["npm", "run", "start"]
        ports:
            - "4321:4321"
        volumes:
            - ./:/app
            - /app/node_modules
        environment:
            - NODE_ENV=development

    frontend:
        build:
            context: ./frontend
            dockerfile: Dockerfile
        command: ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
        ports:
            - "5173:5173"
        volumes:
            - ./frontend:/app
            - /app/node_modules
        environment:
            - NODE_ENV=development
            - CHOKIDAR_USEPOLLING=true
        depends_on:
            - backend

